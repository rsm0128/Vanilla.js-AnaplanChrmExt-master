<div class="row margin-bottom" class="panel-style">
  <div class="col-md-12">
    <h2 class="card-title">Model KPI</h2>
  </div>
</div>
<div class="row">
  <div class="col-lg-4 col-md-12 col-sm-12">
    <div class="card card-stats">
      <div class="card-body">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-tile-56 text-success"></i>
            </div>
          </div>
          <div class="col-7 col-md-8">
            <div class="numbers">
              <p class="card-category" style="margin-right: 20px">Cells</p>
              <p class="card-title" *ngIf="wsInfo?.model?.cellCount"
                style="font-size: calc(20px + 1.5vw); font-weight: bold; margin-right: 20px">
                {{wsInfo.model.cellCount / CELLFILTER | number:'1.0-2' }} M
                <p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-4 col-md-12 col-sm-12">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-ruler-pencil text-warning"></i>
            </div>
          </div>
          <div class="col-7 col-md-8">
            <div class="numbers">
              <p class="card-category" style="margin-right: 20px">Model Size</p>
              <p class="card-title" *ngIf="wsInfo?.model?.modelsize"
                style="font-size: calc(20px + 1.5vw); font-weight: bold; margin-right: 20px">
                {{wsInfo.model.modelsize / GBPIPEFILTER | number:'1.0-2' }} GB
                <p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-4 col-md-12 col-sm-12">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-chart-pie-36 text-danger"></i>
            </div>
          </div>
          <div class="col-7 col-md-8">
            <div class="numbers">
              <p class="card-category" style="margin-right: 20px">% of Total Workspace Size</p>
              <p class="card-title" *ngIf="wsInfo?.workspaceSizeAllowance && wsInfo?.model?.modelsize"
                style="font-size: calc(20px + 1.5vw); font-weight: bold; margin-right: 20px">
                {{wsInfo.model.modelsize * 100 / wsInfo.workspaceSizeAllowance | number:'1.0-2'}} %
                <p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
<div class="row">
  <div class="col-lg-2 col-md-6 col-sm-6" routerLink="/modules">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-app text-warning"></i>
            </div>
          </div>
          <div class="col-6 col-md-8">
            <div class="numbers">
              <p class="card-category">Modules</p>
              <p class="card-title" *ngIf="wsInfo?.model?.snapshot?.module?.code?.length">
                {{wsInfo.model.snapshot.module.code.length}}
                <p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-2 col-md-6 col-sm-6">
    <div class="card card-stats" routerLink="/lists">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-bullet-list-67 text-success"></i>
            </div>
          </div>
          <div class="col-6 col-md-8">
            <div class="numbers">
              <p class="card-category"> Lists</p>
              <p class="card-title" *ngIf="wsInfo?.model?.snapshot?.list?.code?.length">
                {{wsInfo.model.snapshot.list.code.length}}
                <p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-2 col-md-6 col-sm-6">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-bullet-list-67 text-danger"></i>
            </div>
          </div>
          <div class="col-6 col-md-8">
            <div class="numbers">
              <p class="card-category"> Subsets</p>
              <p class="card-title" *ngIf="wsInfo?.model?.snapshot?.list?.subsets">
                {{wsInfo?.model?.snapshot?.list?.subsets.length}}
                <p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-2 col-md-6 col-sm-6">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-vector text-danger"></i>
            </div>
          </div>
          <div class="col-6 col-md-8">
            <div class="numbers">
              <p class="card-category"> Imports</p>
              <p class="card-title" *ngIf="wsInfo?.model?.snapshot?.import?.code">
                {{wsInfo.model.snapshot.import.code.length}}
                <p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-2 col-md-6 col-sm-6">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-vector text-danger"></i>
            </div>
          </div>
          <div class="col-6 col-md-8">
            <div class="numbers">
              <p class="card-category"> Exports</p>
              <p class="card-title" *ngIf="wsInfo?.model?.snapshot?.list?.subsets">
                3
                <p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-2 col-md-6 col-sm-6">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-single-copy-04 text-primary"></i>
            </div>
          </div>
          <div class="col-7 col-md-8">
            <div class="numbers">
              <p class="card-category">Versions</p>
              <p class="card-title" *ngIf="wsInfo?.model?.modelVersion">
                {{wsInfo?.model?.modelVersion}}
                <p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="row" style="margin-top: 20px">
  <div class="col-md-6 col-sm-12">
    <div class="card-title">
      <h6>Model Timescale</h6>
    </div>
    <div class="card" style="height: 120px">
      <div class="card-body" style="margin-left: 20px; margin-right: 20px">
        <apx-chart #modelTMScaleChart [chart]="modelTMScaleChartOpt.chart"
          [dataLabels]="modelTMScaleChartOpt.dataLabels" [stroke]="modelTMScaleChartOpt.stroke"
          [series]="modelTMScaleChartOpt.series" [grid]="modelTMScaleChartOpt.grid" [xaxis]="modelTMScaleChartOpt.xaxis"
          [yaxis]="modelTMScaleChartOpt.yaxis" [tooltip]="modelTMScaleChartOpt.tooltip"
          [markers]="modelTMScaleChartOpt.markers">
        </apx-chart>
      </div>
    </div>
  </div>
  <div class="col-md-3 col-sm-6">
    <h6 class="card-title">
      # of Time Range
    </h6>
    <div class="card" *ngIf="wsInfo?.model?.snapshot?.time" style="height: 120px">
      <div class="card-body">
        <p class="card-title"
          style="color: #1f1f1f; font-size: 32px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
          {{wsInfo.model.snapshot.time.timeRangeCount}}
        </p>
      </div>
    </div>
  </div>
  <div class="col-md-3 col-sm-6">
    <h6 class="card-title">
      Time Granularity
    </h6>
    <div class="card" *ngIf="wsInfo?.model?.snapshot?.time" style="height: 120px">
      <div class="card-body">
        <ul style="font-size: 16px" style="position: absolute; top: 50%; transform: translate(0,-50%);">
          <li>Month</li>
          <li>Year</li>
        </ul>
      </div>
      <div class="card-footer" style="height: 0">
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-6">
    <div class="card-title">
      <h6>Multidimension Modules</h6>
    </div>
    <div class="card">
      <div class="card-body">
        <apx-chart #multiDimChart [chart]="multiDimChartOpt.chart" [plotOptions]="multiDimChartOpt.plotOptions"
          [dataLabels]="multiDimChartOpt.dataLabels" [series]="multiDimChartOpt.series"
          [xaxis]="multiDimChartOpt.xaxis">
        </apx-chart>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card-title">
      <h6>Most Referenced Lists (Top 5)</h6>
    </div>
    <div class="card">
      <div class="card-body">
        <div class="table-responsive">
          <table #listMatTable="matSort" mat-table matSort [dataSource]="listDataSource" class="mat-elevation-z8">

            <!-- name Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Function </th>
              <td mat-cell *matCellDef="let element"> {{element.name}} </td>
            </ng-container>

            <!-- name Column -->
            <ng-container matColumnDef="count">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Count </th>
              <td mat-cell *matCellDef="let element"> {{element.count}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="listDisplayedColumns;sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: listDisplayedColumns;"></tr>
          </table>
        </div>
      </div>
    </div>
  </div>

</div>
