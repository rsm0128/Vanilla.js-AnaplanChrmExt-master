<div class="row margin-bottom" class="panel-style">
  <div class="col-md-12">
    <h2 class="card-title">Line Item Analysis</h2>
  </div>
</div>

<div class="row">

  <div class="col-lg-3 col-md-12 col-sm-12">
    <h6 class="card-title"><br></h6>
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-app text-warning"></i>
            </div>
          </div>
          <div class="col-7 col-md-8">
            <div class="numbers">
              <p class="card-category" style="margin-right: 20px">Modules</p>
              <p class="card-title" *ngIf="wsInfo?.model?.modelData?.module?.code?.length"
                style="font-size: 48px; margin-right: 20px">
                {{wsInfo.model.modelData.module.code.length}}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-tile-56 text-success"></i>
            </div>
          </div>
          <div class="col-7 col-md-8">
            <div class="numbers">
              <p class="card-category" style="margin-right: 20px">LineItems</p>
              <p class="card-title" *ngIf="wsInfo?.model?.modelData?.module?.lineItems?.length > 0"
                style="font-size: 48px; margin-right: 20px">
                {{getLineItemsCount(wsInfo)}}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-9 col-sm-12">
    <h6 class="card-title">Split of Line Items by Format</h6>
    <div class="card">
      <div class="card-body">
        <apx-chart #lineItemFormatChat [plotOptions]="lineItemFormatChatOpt.plotOptions"
          [chart]="lineItemFormatChatOpt.chart" [series]="lineItemFormatChatOpt.series"
          [xaxis]="lineItemFormatChatOpt.xaxis" [dataLabels]="lineItemFormatChatOpt.dataLabels"
          [colors]="lineItemFormatChatOpt.colors" [yaxis]="lineItemFormatChatOpt.yaxis"
          [ngStyle]="{'cursor': cursorType}">
        </apx-chart>
      </div>
    </div>
  </div>
</div>
<div style="height: 340px; margin-bottom: 60px;">
  <div class="row h-100">
    <div class="col-lg-6 col-md-6 col-sm-12">
      <h6 class="card-title">
        Functions Frequency
        <span *ngIf="funcDataList?.length > 0">({{funcDataList.length}})</span>
      </h6>
      <div class="card card-body h-100">
        <ag-grid-angular id="functionGrid" style="width: 100%; height: 100%;" class="ag-theme-balham"
          [rowData]="funcDataList" [columnDefs]="funcDisplayedColumnDefs" [defaultColDef]="defaultColDef"
          (rowDoubleClicked)="onFuncRowDoubleClicked($event)" (gridReady)="onGridReady($event)">
        </ag-grid-angular>
      </div>
    </div>
    <div class="col-lg-6 col-md-6 col-sm-12">
      <h6 class="card-title">
        Lists Frequency
        <span *ngIf="listDataList.length > 0">({{listDataList.length}})</span>
      </h6>
      <div class="card card-body h-100">
        <ag-grid-angular style="width: 100%; height: 100%;" class="ag-theme-balham" [rowData]="listDataList"
          [columnDefs]="listDisplayedColumnDefs" [defaultColDef]="defaultColDef" (gridReady)="onGridReady($event)"
          (rowDoubleClicked)="onListRowDoubleClicked($event)" (gridReady)="onGridReady($event)">
        </ag-grid-angular>
      </div>
    </div>
  </div>
</div>
<!-- style="justify-content: flex-end;" -->
<div style="height: 80vh">
  <div class="row h-100">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div style="display: flex; justify-content: space-between;">
        <h6 class="card-title d-inline">
          Line Items
          <span *ngIf="listDataList.length > 0">({{itemDataList.length}})</span>
        </h6>
        <div class="text-right" *ngIf="isSearchTextExist()">
          <button class="btn-outline-primary" (click)="clearFilterParameter()">x clear filter</button>
        </div>
      </div>
      <div class="card card-body h-100">
        <ag-grid-angular style="width: 100%; height: 100%;" class="ag-theme-balham" [rowData]="itemDataList"
          [columnDefs]="itemDisplayedColumnDefs" [defaultColDef]="defaultColDef" (gridReady)="onItemGridReady($event)"
          [frameworkComponents]="frameworkComponents" [getRowHeight]="getItemRowHeight">
        </ag-grid-angular>
      </div>
    </div>
  </div>
</div>
